---
// src/pages/index.astro
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import SEO from '../../components/SEO.astro'; // <-- 1. Re-import the SEO component

const posts = (await getCollection('blog')).sort(
  (a, b) => new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime()
);

// Define page metadata for both the Layout and SEO component
const pageTitle = "Crocheo â€“ Crochet & Code Blog";
const pageDescription = "A blog for developers who love crochet, algorithms, and accessible design tools.";
---
<Layout title={pageTitle} description={pageDescription}>
  
  <SEO
    title={pageTitle}
    description={pageDescription}
    url="https://crocheo.net"
    image="/images/og/og-home.jpg"
  />

  <header class="mb-8 text-center">
    <h1 class="text-4xl font-extrabold text-slate-900">Crocheo Blog</h1>
    <p class="text-slate-600 mt-2">
      Exploring the intersection of crochet artistry, mathematics, and code.
    </p>
  </header>

  <main>
    {posts.map(({ slug, data }) => (
      <article class="mb-8 border-b border-slate-200 pb-6">
        <h2 class="text-2xl font-bold mb-1">
          <a href={`/blog/${slug}`} class="text-blue-700 hover:underline no-underline">
            {data.title}
          </a>
        </h2>
        <time
          datetime={new Date(data.pubDate).toISOString()}
          class="text-slate-500 text-sm"
        >
          {new Date(data.pubDate).toLocaleDateString('en-US', {
            year: 'numeric', month: 'short', day: '2-digit'
          })}
        </time>
        <p class="mt-2 text-slate-700">{data.description}</p>
      </article>
    ))}
  </main>

</Layout>