---
import { getCollection } from 'astro:content';
import SEO from '../../components/SEO.astro';

const posts = await getCollection('blog');
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <SEO
      title="Blog – Crocheo"
      description="All articles exploring crochet mathematics, algorithm design, and pattern tools."
      url="https://crocheo.net/blog"
      image="/images/og/og-home.jpg"
    />
  </head>
  <body style="font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; max-width: 760px; margin: 2rem auto; padding: 0 1rem; line-height: 1.65;">
    <header style="margin-bottom: 2rem;">
      <a href="/" style="text-decoration:none; color:#0366d6;">← Home</a>
      <h1 style="margin:0; margin-top:.5rem;">Crocheo Blog</h1>
      <p style="color:#666; margin-top:.25rem;">
        All posts about crochet, math, and development tools.
      </p>
    </header>

    <main>
      {posts
        .sort((a, b) => new Date(b.data.pubDate) - new Date(a.data.pubDate))
        .map(({ slug, data }) => (
          <article style="margin-bottom: 2rem;">
            <h2 style="margin-bottom:.25rem;">
              <a href={`/blog/${slug}`} style="text-decoration:none; color:#0366d6;">
                {data.title}
              </a>
            </h2>
            <time
              datetime={new Date(data.pubDate).toISOString()}
              style="color:#888; font-size:0.875rem;"
            >
              {new Date(data.pubDate).toLocaleDateString('en-US', {
                year: 'numeric', month: 'short', day: '2-digit'
              })}
            </time>
            <p style="margin-top:.5rem;">{data.description}</p>
          </article>
        ))}
    </main>
  </body>
</html>
